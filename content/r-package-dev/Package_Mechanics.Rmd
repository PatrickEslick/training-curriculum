---
title: "Package Mechanics"
date: "9999-11-15"
slug: "mechanics"
image: "img/main/intro-icons-300px/r-logo.png"
output: USGSmarkdowntemplates::hugoTraining
parent: R Package Development
weight: 1
---

```{r setup, include=FALSE, warning=FALSE, message=FALSE}
library(knitr)

knit_hooks$set(plot=function(x, options) {
  sprintf("<img src='../%s%s-%d.%s'/ title='%s'/>", 
          options$fig.path, options$label, options$fig.cur, options$fig.ext, options$fig.cap)

})

opts_chunk$set(
  echo=TRUE,
  fig.path="static/mechanics/",
  fig.width = 6,
  fig.height = 6,
  fig.cap = "TODO"
)

set.seed(1)
```

This lesson provides definitions and examples of 

## Lesson Objectives

1. What are the structural components of an R-package?
2. How do packages depend on other packages?
3. How can data be included?
4. USGS-specific: License and Disclaimers
5. How-to: build and check
6. Why create internal functions?

## Minimum Package Requirements

There are many excellent resources on how to create an R package. The official documentation is [Writing R Extensions](https://cran.r-project.org/doc/manuals/r-release/R-exts.html). This is the official guide, and R-package developers should absolutely refer back to this page for reference. A common companion to that is Hadley's [Writing R packages](http://r-pkgs.had.co.nz/). It is a very complete guide to the mechanics of R-packages. This section provides the briefest of introductions, but enough to get you started. 

## Package Skeleton

Let's build a bare-bones package from scratch, defining each section as we go. We are using RStudio as our working environment, so let's first create a new Project called "demoPackage". Note we could do all of this by hand as well.

Step 1: Open New Project:

<img class="sideBySide" src="../static/img/newProject.png" alt="New Project", title="New Project">


Step 2: Choose New Package option:

<img class="sideBySide" src="../static/img/newPackage.png" alt="New Package", title="New Package">

Step 3: Name your package:

<img class="sideBySide" src="../static/img/newPackageII.png" alt="Name Package", title="Name Package">


So now, let's look at what was created:

<img class="sideBySide" src="../static/img/packageSkeleton.png" alt="Minimum Package Requirements", title="Minimum Package Requirements">


OK...so that is the absolute minimum required content required to create a package.

### R folder

Any R code that will be executed goes in the "R" folder. You can save one or many files (with a .R extension) that will run when the package is loaded. By using RStudio's package wizard, they created a file "hello.R", which created a "Hello World" function.

### man folder

The "man" folder contains the files used to create each function's "help" file (the documentation). We will discuss the requirements at length in the [Documentation](/r-package-dev/doc) section. Assuming you use the `roxygen2` package, you will not need to create these files by hand, they will be generated by information in the R folder. 

### DESCRIPTION file

The [DESCRIPTION](https://cran.r-project.org/doc/manuals/r-release/R-exts.html#The-DESCRIPTION-file) file contains basic information on the package. 

### NAMESPACE file

The [NAMESPACE](https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Package-namespaces) file 

## Other useful resources
There is no shortage of resources on R developers documenting how to create a package. 

- [Writing R Extensions](https://cran.r-project.org/doc/manuals/r-release/R-exts.html)
- [Hadley's R packages](http://r-pkgs.had.co.nz/)


